// Code generated by templ@v0.2.364 DO NOT EDIT.

package views

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import "context"
import "io"
import "bytes"

import (
	"fmt"
	"github.com/ugent-library/deliver/ctx"
	"github.com/ugent-library/deliver/models"
	"github.com/ugent-library/friendly"
)

func ShowFolder(c *ctx.Ctx, folder *models.Folder) templ.Component {
	return templ.ComponentFunc(func(ctx context.Context, w io.Writer) (err error) {
		templBuffer, templIsBuffer := w.(*bytes.Buffer)
		if !templIsBuffer {
			templBuffer = templ.GetBuffer()
			defer templ.ReleaseBuffer(templBuffer)
		}
		ctx = templ.InitializeContext(ctx)
		var_1 := templ.GetChildren(ctx)
		if var_1 == nil {
			var_1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		var_2 := templ.ComponentFunc(func(ctx context.Context, w io.Writer) (err error) {
			templBuffer, templIsBuffer := w.(*bytes.Buffer)
			if !templIsBuffer {
				templBuffer = templ.GetBuffer()
				defer templ.ReleaseBuffer(templBuffer)
			}
			_, err = templBuffer.WriteString("<div class=\"w-100 u-scroll-wrapper\" hx-ext=\"ws\" ws-connect=\"")
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString(templ.EscapeString(c.WebSocketPath("folder." + folder.ID)))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\"><div class=\"bg-white\"><div class=\"border-bottom py-5 px-6\"><div class=\"bc-toolbar bc-toolbar--auto\"><div class=\"bc-toolbar-left\"><div class=\"bc-toolbar-item\"><h4 class=\"bc-toolbar-title\"><a href=\"")
			if err != nil {
				return err
			}
			var var_3 templ.SafeURL = templ.URL(c.PathTo("space", "spaceName", folder.Space.Name).String())
			_, err = templBuffer.WriteString(templ.EscapeString(string(var_3)))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\"><i class=\"if if-arrow-left\"></i><span>")
			if err != nil {
				return err
			}
			var var_4 string = folder.Space.Name
			_, err = templBuffer.WriteString(templ.EscapeString(var_4))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</span></a> ")
			if err != nil {
				return err
			}
			var_5 := `&nbsp;&mdash; `
			_, err = templBuffer.WriteString(var_5)
			if err != nil {
				return err
			}
			var var_6 string = folder.Name
			_, err = templBuffer.WriteString(templ.EscapeString(var_6))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</h4></div><div class=\"bc-toolbar-item\"><p>")
			if err != nil {
				return err
			}
			var_7 := `expires on `
			_, err = templBuffer.WriteString(var_7)
			if err != nil {
				return err
			}
			var var_8 string = folder.ExpiresAt.In(c.Timezone).Format("2006-01-02 15:04")
			_, err = templBuffer.WriteString(templ.EscapeString(var_8))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</p></div></div><div class=\"bc-toolbar-right\"><div class=\"bc-toolbar-item\"><a class=\"btn btn-link btn-link-muted\" href=\"")
			if err != nil {
				return err
			}
			var var_9 templ.SafeURL = templ.URL(c.PathTo("space", "spaceName", folder.Space.Name).String())
			_, err = templBuffer.WriteString(templ.EscapeString(string(var_9)))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\"><i class=\"if if-add\"></i><span class=\"btn-text\">")
			if err != nil {
				return err
			}
			var_10 := `Make new folder`
			_, err = templBuffer.WriteString(var_10)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</span></a></div><div class=\"bc-toolbar-item\"><a class=\"btn btn-link btn-link-muted\" href=\"")
			if err != nil {
				return err
			}
			var var_11 templ.SafeURL = templ.URL(c.PathTo("editFolder", "folderID", folder.ID).String())
			_, err = templBuffer.WriteString(templ.EscapeString(string(var_11)))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\"><i class=\"if if-edit\"></i><span class=\"btn-text\">")
			if err != nil {
				return err
			}
			var_12 := `Edit`
			_, err = templBuffer.WriteString(var_12)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</span></a></div></div></div><div class=\"bc-toolbar bc-toolbar--auto mt-3 mb-2\"><div class=\"bc-toolbar-left\"><div class=\"bc-toolbar-item col-lg-8 col-sm-12 ps-0\"><div class=\"input-group\"><button type=\"button\" class=\"btn btn-outline-secondary\" data-clipboard=\"")
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString(templ.EscapeString(c.URLTo("shareFolder", "folderID", folder.ID, "folderSlug", folder.Slug()).String()))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\"><i class=\"if if-copy text-primary\"></i><span class=\"btn-text text-primary\">")
			if err != nil {
				return err
			}
			var_13 := `Copy public shareable link`
			_, err = templBuffer.WriteString(var_13)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</span></button><input type=\"text\" class=\"form-control input-select-text\" readonly data-select-value value=\"")
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString(templ.EscapeString(c.URLTo("shareFolder", "folderID", folder.ID, "folderSlug", folder.Slug()).String()))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\"></div></div></div></div></div></div><div class=\"u-scroll-wrapper__body p-6\"><div class=\"card w-100 mb-6\"><div class=\"card-header visually-hidden\"><div class=\"bc-toolbar\"><div class=\"bc-toolbar-left\"><h2 class=\"bc-toolbar-item\">")
			if err != nil {
				return err
			}
			var_14 := `Upload files`
			_, err = templBuffer.WriteString(var_14)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</h2></div></div></div><div class=\"card-body\"><form action=\"")
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString(templ.EscapeString(c.PathTo("uploadFile", "folderID", folder.ID).String()))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\" enctype=\"multipart/form-data\" method=\"POST\">")
			if err != nil {
				return err
			}
			err = csrfField(c).Render(ctx, templBuffer)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("<div class=\"c-file-upload c-file-upload--small\"><input type=\"file\" name=\"file\" multiple data-upload-progress-target=\"file-upload-progress\" data-upload-max-file-size=\"")
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString(templ.EscapeString(fmt.Sprint(c.MaxFileSize)))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\" data-upload-msg-file-aborted=\"File upload aborted by you\" data-upload-msg-file-uploading=\"Uploading your file. Hold on, do not refresh the page.\" data-upload-msg-file-processing=\"Processing your file. Hold on, do not refresh the page.\" data-upload-msg-file-too-large=\"")
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString(templ.EscapeString(fmt.Sprintf("File is too large. Maximum file size is %s", friendly.Bytes(c.MaxFileSize))))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\" data-upload-msg-dir-not-found=\"File upload failed: directory has been removed. Please reload\" data-upload-msg-unexpected=\"File upload failed: unexpected server error\"><div class=\"c-file-upload__content\"><p class=\"pt-2\">")
			if err != nil {
				return err
			}
			var_15 := `Drag and drop or`
			_, err = templBuffer.WriteString(var_15)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</p><button class=\"btn btn-outline-primary\" data-loading=\"Uploading...\">")
			if err != nil {
				return err
			}
			var_16 := `Upload files`
			_, err = templBuffer.WriteString(var_16)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</button><p class=\"small pt-2 mb-0\">")
			if err != nil {
				return err
			}
			var_17 := `Maximum file size: `
			_, err = templBuffer.WriteString(var_17)
			if err != nil {
				return err
			}
			var var_18 string = friendly.Bytes(c.MaxFileSize)
			_, err = templBuffer.WriteString(templ.EscapeString(var_18))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</p></div></div></form><ul class=\"list-group list-group-flush\" id=\"file-upload-progress\"></ul></div></div><div hx-get=\"")
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString(templ.EscapeString(c.PathTo("folder", "folderID", folder.ID).String()))
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("\" hx-swap=\"innerHTML\" hx-trigger=\"refresh-files from:body\">")
			if err != nil {
				return err
			}
			err = Files(c, folder.Files).Render(ctx, templBuffer)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</div></div></div> <template id=\"tmpl-upload-progress\"><li class=\"list-group-item\"><div class=\"list-group-item-inner\"><div class=\"list-group-item-main u-min-w-0\"><div class=\"bc-toolbar bc-toolbar--auto\"><div class=\"bc-toolbar-left\"><div class=\"bc-toolbar-item\"><h4 class=\"list-group-item-title mb-0 upload-name\"></h4></div></div><div class=\"bc-toolbar-right\"><div class=\"bc-toolbar-item ms-auto ms-lg-0\"><button class=\"btn btn-sm btn-cancel-upload\" type=\"button\"><i class=\"if if-close\"></i><span class=\"btn-text\">")
			if err != nil {
				return err
			}
			var_19 := `Cancel upload`
			_, err = templBuffer.WriteString(var_19)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</span></button><button class=\"btn btn-sm btn-remove-upload d-none\" type=\"button\"><i class=\"if if-close\"></i><span class=\"btn-text\">")
			if err != nil {
				return err
			}
			var_20 := `Remove`
			_, err = templBuffer.WriteString(var_20)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</span></button></div></div></div><div class=\"progress w-100 mt-4\"><div class=\"progress-bar progress-bar-striped\" role=\"progressbar\" style=\"width:0%\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div></div><div class=\"bc-toolbar bc-toolbar--auto mt-2\"><div class=\"bc-toolbar-left\"><span class=\"small text-muted upload-msg\"></span></div><div class=\"bc-toolbar-right\"><span class=\"small text-muted\"><span class=\"upload-size\"></span> ")
			if err != nil {
				return err
			}
			var_21 := `&mdash; `
			_, err = templBuffer.WriteString(var_21)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("<span class=\"upload-percent\">")
			if err != nil {
				return err
			}
			var_22 := `0`
			_, err = templBuffer.WriteString(var_22)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</span>")
			if err != nil {
				return err
			}
			var_23 := `%`
			_, err = templBuffer.WriteString(var_23)
			if err != nil {
				return err
			}
			_, err = templBuffer.WriteString("</span></div></div></div></div></li></template>")
			if err != nil {
				return err
			}
			if !templIsBuffer {
				_, err = io.Copy(w, templBuffer)
			}
			return err
		})
		err = pageLayout(c, folder.Name).Render(templ.WithChildren(ctx, var_2), templBuffer)
		if err != nil {
			return err
		}
		if !templIsBuffer {
			_, err = templBuffer.WriteTo(w)
		}
		return err
	})
}
